<?xml version="1.0" encoding="UTF-8"?>
<!--
This file is subject to the terms and conditions defined in the
files 'LICENSE' and 'NOTICE', which are part of this source
code package.
-->

<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <!-- SCIPIO: NOTE: The old parameters.fixedAssetDecoratorLocation pattern that existed here has been supplanted
        by the decorator default-fallback-location pattern for parameters.mainDecoratorLocation (see CommonScreens.xml). -->

    <!-- list all assets in a tabular format -->
    <screen name="ListFixedAssets">
        <section>
            <actions>
                <set field="titleProperty" value="AccountingFindFixedAssets"/>
                <set field="activeSubMenuItem" value="ListFixedAssets"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonFixedAssetsDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="menu-bar">
                                <section>
                                    <condition>
                                        <if-service-permission service-name="fixedAssetPermissionCheck" main-action="CREATE"/>
                                    </condition>
                                    <widgets>
                                        <container style="button-bar">
                                            <link target="EditFixedAsset" text="${uiLabelMap.AccountingNewFixedAsset}" style="${styles.link_nav} ${styles.action_add}"/>
                                        </container>
                                    </widgets>
                                </section>
                            </decorator-section>
                            <decorator-section name="search-options">
                                <include-form name="FindFixedAssetOptions" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                                <include-screen name="FixedAssetSearchResults"/>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
         </section>
    </screen>

    <screen name="FixedAssetSearchResults">
        <section>
            <condition>
                <if-service-permission service-name="fixedAssetPermissionCheck" main-action="VIEW"/>
            </condition>
            <actions>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>
            <widgets>
                <include-form name="ListFixedAssets" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
            </widgets>
        </section>
    </screen>

    <!-- create and/or update a fixed asset -->
    <screen name="EditFixedAsset">
        <section>
            <actions>
                <set field="activeSubMenuItem" value="EditFixedAsset"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
                <set field="titleProperty" value="${groovy: context.fixedAsset ? 'PageTitleEditFixedAsset' : 'AccountingNewFixedAsset'}"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <and>
                                    <if-service-permission service-name="fixedAssetPermissionCheck" main-action="CREATE"/>
                                    <not><if-empty field="fixedAsset"/></not>
                                </and>
                            </condition>
                            <widgets>
                                <container style="button-bar"><link target="EditFixedAsset" text="${uiLabelMap.AccountingNewFixedAsset}" style="${styles.link_nav} ${styles.action_add}"/></container>
                            </widgets>
                        </section>
                        <include-form name="EditFixedAsset" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <!-- provide a list and allow additions -->
    <screen name="ListFixedAssetProducts">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListFixedAssetProducts"/>
                <set field="activeSubMenuItem" value="ListFixedAssetProducts"/>
                <set field="labelTitleProperty" value="AccountingFixedAssetProducts"/>

                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
                <entity-condition entity-name="FixedAssetProduct" list="fixedAssetProducts" >
                    <condition-expr field-name="fixedAssetId" from-field="fixedAssetId"/>
                    <order-by field-name="productId"/>
                    <order-by field-name="fixedAssetProductTypeId"/>
                    <order-by field-name="fromDate"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet id="add-fixedasset-product" title="${uiLabelMap.AccountingFixedAssetProductAdd}" collapsible="true">
                            <include-form name="AddFixedAssetProduct" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <include-form name="ListFixedAssetProducts" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="WorkEffortSummary">
        <section>
            <actions>
                <set field="activeSubMenuItem" value="ListFixedAssetCalendar"/>
                <set field="titleProperty" value="PageTitleWorkEffortRelatedSummary"/>
                <entity-one entity-name="WorkEffort" value-field="workEffort"/>
                <set field="fixedAssetId" from-field="workEffort.fixedAssetId"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <include-form name="WorkEffortSummary" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditFixedAssetStdCosts">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFixedAssetStdCosts"/>
                <set field="activeSubMenuItem" value="EditFixedAssetStdCosts"/>
                <set field="labelTitleProperty" value="PageTitleEditFixedAssetStdCosts"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>

                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="USD"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet id="add-fixed-asset-std-cost" title="${uiLabelMap.AccountingAddFixedAssetStdCost}" collapsible="true">
                            <include-form name="EditFixedAssetStdCost" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <include-form name="ListFixedAssetStdCosts" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <!-- Fixed Asset Idents -->
    <screen name="EditFixedAssetIdents">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFixedAssetIdents"/>
                <set field="activeSubMenuItem" value="EditFixedAssetIdents"/>
                <set field="labelTitleProperty" value="PageTitleEditFixedAssetIdents"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="fixedAssetIdentTypeId" from-field="parameters.fixedAssetIdentTypeId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet id="edit-fixed-asset-idents" title="${uiLabelMap.AccountingAddFixedAssetIdent}" collapsible="true">
                            <include-form name="AddFixedAssetIdent" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <include-form name="ListFixedAssetIdents" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="Calendar">
        <section>
            <actions>
                <set field="activeSubMenuItem" value="ListFixedAssetCalendar"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
            </actions>
            <widgets>
                <section>
                    <condition>
                        <if-compare field="parameters.period" operator="equals" value="day"/>
                    </condition>
                    <actions>
                        <set field="titleProperty" value="PageTitleCalendarDay"/>
                        <!-- TODO?<set field="activeSubMenuItem" value="day"/>-->
                    </actions>
                </section>
                <section>
                    <condition>
                        <or>
                            <if-compare field="parameters.period" operator="equals" value="week"/>
                            <if-empty field="parameters.period"/>
                        </or>
                    </condition>
                    <actions>
                        <set field="titleProperty" value="PageTitleCalendarWeek"/>
                        <!-- <set field="activeSubMenuItem" value="week"/>-->
                    </actions>
                </section>
                <section>
                    <condition>
                        <if-compare field="parameters.period" operator="equals" value="month"/>
                    </condition>
                    <actions>
                        <set field="titleProperty" value="PageTitleCalendarMonth"/>
                        <!-- <set field="activeSubMenuItem" value="month"/>-->
                    </actions>
                </section>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <include-screen name="Calendar" location="component://workeffort/widget/CalendarScreens.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <!-- Fixed Asset Registrations -->
    <screen name="EditFixedAssetRegistrations">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFixedAssetRegistrations"/>
                <set field="activeSubMenuItem" value="EditFixedAssetRegistrations"/>
                <set field="labelTitleProperty" value="PageTitleEditFixedAssetRegistrations"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="fromDate" from-field="parameters.fromDate"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet id="add-fixed-asset-registration" title="${uiLabelMap.AccountingAddFixedAssetRegistration}" collapsible="true">
                            <include-form name="AddFixedAssetRegistration" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <include-form name="ListFixedAssetRegistrations" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ListFixedAssetMaints">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListFixedAssetMaints"/>
                <set field="activeSubMenuItem" value="ListFixedAssetMaints"/>
                <set field="labelTitleProperty" value="PageTitleListFixedAssetMaints"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="fromDate" from-field="parameters.fromDate"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
            </actions>
            <widgets>
                <!-- SCIPIO: changed this from FixedAssetDecorator to CommonFixedAssetMaintDecorator so menu opens... -->
                <decorator-screen name="CommonFixedAssetMaintDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <container style="button-bar">
                            <link target="EditFixedAssetMaint" text="${uiLabelMap.AccountingNewFixedAssetMaint}" style="${styles.link_nav} ${styles.action_add}">
                                <parameter param-name="fixedAssetId"/>
                            </link>
                        </container>
                        <include-form name="ListFixedAssetMaints" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditFixedAssetMaint">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFixedAssetMaintenance"/>
                <!--
                <set field="activeSubMenuItem" value="ListFixedAssetMaints"/>
                <set field="activeSubMenuItemFixedAssetMaint" value="EditFixedAssetMaint"/> -->
                
                <set field="labelTitleProperty" value="PageTitleEditFixedAssetMaintenance"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="maintHistSeqId" from-field="parameters.maintHistSeqId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
                <entity-one entity-name="FixedAssetMaint" value-field="fixedAssetMaint"/>
                
                <set field="activeSubMenuItem" value="${groovy: context.fixedAssetMaint ? 'EditFixedAssetMaint':'NewFixedAssetMaint'}"/>
            </actions>
            <widgets>
                <section>
                    <condition><if-empty field="maintHistSeqId"/></condition>
                    <actions><set field="titleProperty" value="AccountingAddFixedAssetMaintenance"/></actions>
                </section>
                <decorator-screen name="CommonFixedAssetMaintDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <and>
                                    <not><if-empty field="maintHistSeqId"/></not>
                                    <if-service-permission service-name="fixedAssetPermissionCheck" main-action="CREATE"/>
                                </and>
                            </condition>
                            <widgets>
                                <container style="button-bar">
                                    <link target="EditFixedAssetMaint" text="${uiLabelMap.AccountingNewFixedAssetMaint}" style="${styles.link_nav} ${styles.action_add}">
                                        <parameter param-name="fixedAssetId"/>
                                    </link>
                                </container>
                            </widgets>
                        </section>
                        <include-form name="EditFixedAssetMaint" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- Fixed Asset Meter -->
    <screen name="EditFixedAssetMeters">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFixedAssetMeters"/>
                
                <set field="activeSubMenuItem" value="EditFixedAssetMeters"/>
                <!-- <set field="activeSubMenuItemFixedAssetMaint" value="EditFixedAssetMeters"/>-->
                
                <set field="labelTitleProperty" value="PageTitleEditFixedAssetMaintenance"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="maintHistSeqId" from-field="parameters.maintHistSeqId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
                <entity-one entity-name="FixedAssetMaint" value-field="fixedAssetMaint"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonFixedAssetMaintDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet id="add-fixedasset-meter" title="${uiLabelMap.AccountingAddFixedAssetMeter}" collapsible="true">
                            <include-form name="AddFixedAssetMeter" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <include-form name="ListFixedAssetMeters" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- Fixed Asset Children -->
    <screen name="FixedAssetChildren">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListFixedAssetChildren"/>
                <set field="activeSubMenuItem" value="FixedAssetChildren"/>
                <set field="labelTitleProperty" value="PageTitleListFixedAssetChildren"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="trail" from-field="parameters.trail" default-value="${parameters.fixedAssetId}"/>
                <set field="fixedAssetId" from-field="parameters.trail"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <include-tree name="TreeFixedAsset" location="component://accounting/widget/ledger/AccountingTrees.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- Fixed Asset Maint Order -->
    <screen name="EditFixedAssetMaintOrders">
        <section>
            <actions>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap"/>
                <set field="titleProperty" value="PageTitleEditFixedAssetMaintOrders"/>
                <!-- 
                <set field="activeSubMenuItem" value="ListFixedAssetMaints"/>
                <set field="activeSubMenuItemFixedAssetMaint" value="EditFixedAssetMaintOrders"/>-->
                <set field="activeSubMenuItem" value="EditFixedAssetMaintOrders"/>
                <set field="labelTitleProperty" value="PageTitleEditFixedAssetMaintenance"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="maintHistSeqId" from-field="parameters.maintHistSeqId"/>
                <set field="orderId" from-field="parameters.orderId"/>
                <set field="orderItemSeqId" from-field="parameters.orderItemSeqId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
                <entity-one entity-name="FixedAssetMaint" value-field="fixedAssetMaint"/>
                <entity-one entity-name="FixedAssetMaintOrder" value-field="fixedAssetMaintOrder"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonFixedAssetMaintDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet id="add-fixedasset-maint-order" title="${uiLabelMap.AccountingAddFixedAssetMaintOrder}" collapsible="true">
                            <include-form name="AddFixedAssetMaintOrder" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <include-form name="ListFixedAssetMaintOrders" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- ===========Party Fixed Asset Assignment Screen========== -->
    <screen name="EditPartyFixedAssetAssignments">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditPartyFixedAssetAssignments"/>
                <set field="activeSubMenuItem" value="EditPartyFixedAssetAssignments"/>
                <set field="labelTitleProperty" value="PageTitleEditPartyFixedAssetAssignments"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <set field="partyId" from-field="parameters.partyId"/>
                <set field="roleTypeId" from-field="parameters.roleTypeId"/>
                <set field="fromDate" from-field="parameters.fromDate"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
                <entity-one entity-name="PartyFixedAssetAssignment" value-field="partyFixedAssetAssignment"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet id="add-party-fixedasset-assignments" title="${uiLabelMap.AccountingAddFixedAssetPartyAssignment}" collapsible="true">
                            <include-form name="AddPartyFixedAssetAssignment" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <include-form name="ListPartyFixedAssetAssignments" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- ===========Fixed Asset Depreciation Screen========== -->
    <screen name="ShowFixedAssetDepreciation">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFixedAssetDepreciationReport"/>
                <set field="activeSubMenuItem" value="FixedAssetDepreciation"/>
                <set field="labelTitleProperty" value="PageTitleFixedAssetDepreciationReport"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset" auto-field-map="true"/>
                <service service-name="calculateFixedAssetDepreciation" result-map="assetDepreciationResultMap">
                    <field-map field-name="fixedAssetId" from-field="parameters.fixedAssetId"/>
                </service>
                <set field="assetDepreciationInfoList" from-field="assetDepreciationResultMap.assetDepreciationInfoList"/>
                <set field="assetDepreciationResultMessages" from-field="assetDepreciationResultMap.successMessageList"/>
                <set field="depreciation" from-field="fixedAsset.depreciation" default-value="0.0" type="BigDecimal"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.PageTitleFixedAssetDepreciationHistory}">
                            <label>${uiLabelMap.FormFieldTitle_purchaseCost}: ${fixedAsset.purchaseCost}</label>
                            <label>${uiLabelMap.FormFieldTitle_depreciation}: ${depreciation}</label>
                            <label>${uiLabelMap.FormFieldTitle_salvageValue}: ${fixedAsset.salvageValue}</label>
                            <label>${uiLabelMap.FormFieldTitle_dateAcquired}: ${fixedAsset.dateAcquired}</label>
                            <label>${uiLabelMap.FormFieldTitle_expectedEndOfLife}: ${fixedAsset.expectedEndOfLife}</label>
                            <label>${uiLabelMap.FormFieldTitle_NextDepreciationAmount}: ${assetDepreciationResultMap.nextDepreciationAmount}</label>
                            <section>
                                <condition>
                                    <and>
                                        <not><if-empty field="assetDepreciationResultMap.plannedPastDepreciationTotal"/></not>
                                        <not><if-empty field="fixedAsset.partyId"/></not>
                                        <if-compare-field field="assetDepreciationResultMap.plannedPastDepreciationTotal" to-field="depreciation" operator="greater" type="BigDecimal"/>
                                    </and>
                                </condition>
                                <actions>
                                    <service service-name="getGlAccountFromAccountType" result-map="defaultCreditAccountForDepreciationTransactionResult">
                                        <field-map field-name="organizationPartyId" from-field="fixedAsset.partyId"/>
                                        <field-map field-name="acctgTransTypeId" value="DEPRECIATION"/>
                                        <field-map field-name="fixedAssetId" from-field="fixedAsset.fixedAssetId"/>
                                        <field-map field-name="debitCreditFlag" value="C"/>
                                    </service>
                                    <set field="defaultCreditAccountForDepreciationTransaction" from-field="defaultCreditAccountForDepreciationTransactionResult.glAccountId" default-value=" "/>
                                    <service service-name="getGlAccountFromAccountType" result-map="defaultDebitAccountForDepreciationTransactionResult">
                                        <field-map field-name="organizationPartyId" from-field="fixedAsset.partyId"/>
                                        <field-map field-name="acctgTransTypeId" value="DEPRECIATION"/>
                                        <field-map field-name="fixedAssetId" from-field="fixedAsset.fixedAssetId"/>
                                        <field-map field-name="debitCreditFlag" value="D"/>
                                    </service>
                                    <set field="defaultDebitAccountForDepreciationTransaction" from-field="defaultDebitAccountForDepreciationTransactionResult.glAccountId" default-value=" "/>
                                </actions>
                                <widgets>
                                    <container>
                                        <link text="${uiLabelMap.AccountingCreateAnAccountingTransaction}: ${assetDepreciationResultMap.plannedPastDepreciationTotal}" style="${styles.link_nav_long} ${styles.action_add}" target="CreateAcctgTransAndEntries">
                                            <parameter param-name="fixedAssetId" from-field="fixedAsset.fixedAssetId"/>
                                            <parameter param-name="organizationPartyId" from-field="fixedAsset.partyId"/>
                                            <parameter param-name="acctgTransTypeId" value="DEPRECIATION"/>
                                            <parameter param-name="debitGlAccountId" from-field="defaultDebitAccountForDepreciationTransaction"/>
                                            <parameter param-name="creditGlAccountId" from-field="defaultCreditAccountForDepreciationTransaction"/>
                                            <parameter param-name="amount" from-field="assetDepreciationResultMap.plannedPastDepreciationTotal"/>
                                        </link>
                                    </container>
                                </widgets>
                            </section>
                        </screenlet>
                        <screenlet title="${uiLabelMap.PageTitleFixedAssetDepreciationMethod}">
                            <include-form name="AddFixedAssetDepMethod" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                            <include-form name="ListFixedAssetDepMethods" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.AccountingGlMappings}">
                            <include-form name="AddFixedAssetTypeGlAccount" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                            <label>${uiLabelMap.PageTitleFixedAssetMappings}</label>
                            <include-form name="FixedAssetTypeGlAccounts" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                            <label>${uiLabelMap.PageTitleFixedAssetGlobalMappings}</label>
                            <include-form name="GlobalFixedAssetTypeGlAccounts" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                        <section>
                            <condition>
                                <not><if-empty field="assetDepreciationInfoList"/></not>
                            </condition>
                            <widgets>
                                <screenlet title="${uiLabelMap.PageTitleFixedAssetDepreciationReport}">
                                    <include-form name="ListFixedAssetDepreciations" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <screenlet title="${uiLabelMap.PageTitleFixedAssetDepreciationReport}">
                                    <label>${assetDepreciationResultMessages}</label>
                                </screenlet>
                            </fail-widgets>
                        </section>
                        <screenlet title="${uiLabelMap.AccountingTransactions}">
                            <include-form name="FixedAssetTransactions" location="component://accounting/widget/assets/FixedAssetForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="FixedAssetGeoLocation">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFixedAssetGeoLocation"/>
                <set field="activeSubMenuItem" value="FixedAssetGeoLocation"/>
                <set field="fixedAssetId" from-field="parameters.fixedAssetId"/>
                <entity-one entity-name="FixedAsset" value-field="fixedAsset"/>
                <script location="component://accounting/webapp/accounting/WEB-INF/actions/fixedasset/FixedAssetGeoLocation.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="FixedAssetDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <label>${uiLabelMap.CommonLatitude} ${latestGeoPoint.latitude}</label>
                        <label>${uiLabelMap.CommonLongitude} ${latestGeoPoint.longitude}</label>
                        <label>${uiLabelMap.CommonElevation} ${latestGeoPoint.elevation} ${elevationUomAbbr}</label>
                        <include-screen name="geoChart" location="component://common/widget/CommonScreens.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

</screens>
